---
title: Install CUDA on Ubuntu 16.04
author: Samuel Bohman
date: '2017-10-11'
slug: install-cuda-on-ubuntu-16-04
categories: []
tags:
  - cuda
  - ubuntu 16.04
  - parallel computing
summary: "A step-by-step tutorial on how to install CUDA on Ubuntu 16.04."
---



<p>This blog post describes how to install NVIDIA CUDA on Ubuntu 16.04 for parallel computing. The exact appearance and the output lines might be different on your system. Read more at the official NVIDIA documentations website: <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/" class="uri">http://docs.nvidia.com/cuda/cuda-installation-guide-linux/</a>.</p>
<div id="pre-installation-actions" class="section level2">
<h2>Pre-Installation Actions</h2>
<div id="verify-you-have-a-cuda-capable-gpu" class="section level3">
<h3>Verify You Have a CUDA-Capable GPU</h3>
<pre class="bash"><code>lspci | grep -i nvidia</code></pre>
<pre><code>## 01:00.0 VGA compatible controller: NVIDIA Corporation Device 1c03 (rev a1)
## 01:00.1 Audio device: NVIDIA Corporation Device 10f1 (rev a1)</code></pre>
</div>
<div id="verify-you-have-a-supported-version-of-linux" class="section level3">
<h3>Verify You Have a Supported Version of Linux</h3>
<pre class="bash"><code>uname -m &amp;&amp; cat /etc/*release</code></pre>
<pre><code>## x86_64
## DISTRIB_ID=Ubuntu
## DISTRIB_RELEASE=16.04
## DISTRIB_CODENAME=xenial
## DISTRIB_DESCRIPTION=&quot;Ubuntu 16.04.3 LTS&quot;
## NAME=&quot;Ubuntu&quot;
## VERSION=&quot;16.04.3 LTS (Xenial Xerus)&quot;
## ID=ubuntu
## ID_LIKE=debian
## PRETTY_NAME=&quot;Ubuntu 16.04.3 LTS&quot;
## VERSION_ID=&quot;16.04&quot;
## HOME_URL=&quot;http://www.ubuntu.com/&quot;
## SUPPORT_URL=&quot;http://help.ubuntu.com/&quot;
## BUG_REPORT_URL=&quot;http://bugs.launchpad.net/ubuntu/&quot;
## VERSION_CODENAME=xenial
## UBUNTU_CODENAME=xenial</code></pre>
</div>
<div id="verify-the-system-has-gcc-installed" class="section level3">
<h3>Verify the System Has gcc Installed</h3>
<pre class="bash"><code>gcc --version</code></pre>
<pre><code>## gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609
## Copyright (C) 2015 Free Software Foundation, Inc.
## This is free software; see the source for copying conditions.  There is NO
## warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</code></pre>
</div>
<div id="verify-the-system-has-the-correct-kernel-headers-and-development-packages-installed" class="section level3">
<h3>Verify the System has the Correct Kernel Headers and Development Packages Installed</h3>
<pre class="bash"><code>uname -r</code></pre>
<pre><code>## 4.10.0-37-generic</code></pre>
<p>The kernel headers and development packages for the currently running kernel can be installed with:</p>
<pre class="r"><code>sudo apt-get install linux-headers-$(uname -r)</code></pre>
</div>
<div id="choose-an-installation-method" class="section level3">
<h3>Choose an Installation Method</h3>
<p>NVIDIA recommends to use the distribution-specific packages, where possible.</p>
</div>
<div id="download-the-nvidia-cuda-toolkit" class="section level3">
<h3>Download the NVIDIA CUDA Toolkit</h3>
<p>The NVIDIA CUDA Toolkit is available <a href="http://developer.nvidia.com/cuda-downloads">here</a>. Next, verify your download by comparing the <a href="http://developer.download.nvidia.com/compute/cuda/9.0/Prod/docs/sidebar/md5sum.txt">MD5 checksum</a>. To calculate the MD5 checksum of the downloaded file, run the following (you may need to change the <code>~/Downloads/</code> part):</p>
<pre class="bash"><code>md5sum ~/Downloads/cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb</code></pre>
<pre><code>## e78e6ff56582f09a0cbc607049bdb2fd  /home/samuel/Downloads/cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb</code></pre>
<div id="handle-conflicting-installation-methods" class="section level4">
<h4>Handle Conflicting Installation Methods</h4>
<p>Before installing CUDA, any previously installations that could conflict should be uninstalled.</p>
<pre class="bash"><code># Use the following command to uninstall a Toolkit runfile installation
sudo /usr/local/cuda-X.Y/bin/uninstall_cuda_X.Y.pl

# Use the following command to uninstall a Driver runfile installation
sudo /usr/bin/nvidia-uninstall

# Use the following commands to uninstall a RPM/Deb installation
sudo apt-get --purge remove &lt;package_name&gt;  # Ubuntu</code></pre>
</div>
</div>
</div>
<div id="packet-manager-installation" class="section level2">
<h2>Packet Manager Installation</h2>
<ol style="list-style-type: decimal">
<li>Perform the pre-install actions (described above)</li>
<li>Install repository meta-data</li>
</ol>
<pre class="bash"><code>sudo dpkg -i cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Install the CUDA public GPG key</li>
</ol>
<pre class="bash"><code>sudo apt-key add /var/cuda-repo-9-0-local/7fa2af80.pub</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Update the Apt repository cache</li>
</ol>
<pre class="bash"><code>sudo apt-get update</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Install CUDA</li>
</ol>
<pre class="bash"><code>sudo apt-get install cuda</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Reboot</li>
</ol>
<pre class="bash"><code>sudo reboot</code></pre>
</div>
<div id="post-installation-actions" class="section level2">
<h2>Post-Installation Actions</h2>
<p>The post-installation actions must be manually performed. These actions are split into mandatory, recommended, and optional sections.</p>
<div id="environment-setup" class="section level3">
<h3>Environment Setup</h3>
<pre class="bash"><code>export PATH=/usr/local/cuda-9.0/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-9.0/lib64\${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</code></pre>
</div>
<div id="install-writable-samples" class="section level3">
<h3>Install Writable Samples</h3>
<p>In order to modify, compile, and run the samples, the samples must be installed with write permissions. A convenience installation script is provided:</p>
<pre class="bash"><code>cuda-install-samples-9.0.sh ~/  # root directory </code></pre>
</div>
<div id="verify-the-installation" class="section level3">
<h3>Verify the Installation</h3>
<p>Before continuing, it is important to verify that the CUDA toolkit can find and communicate correctly with the CUDA-capable hardware. To do this, you need to compile and run some of the included sample programs.</p>
<div id="verify-the-driver-version" class="section level4">
<h4>Verify the driver version</h4>
<pre class="bash"><code>cat /proc/driver/nvidia/version</code></pre>
<pre><code>## NVRM version: NVIDIA UNIX x86_64 Kernel Module  384.81  Sat Sep  2 02:43:11 PDT 2017
## GCC version:  gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4)</code></pre>
</div>
<div id="verify-the-cuda-toolkit-version" class="section level4">
<h4>Verify the CUDA Toolkit version</h4>
<pre class="bash"><code>nvcc -V</code></pre>
<pre><code>## nvcc: NVIDIA (R) Cuda compiler driver
## Copyright (c) 2005-2017 NVIDIA Corporation
## Built on Fri_Sep__1_21:08:03_CDT_2017
## Cuda compilation tools, release 9.0, V9.0.176</code></pre>
</div>
<div id="verify-nvidia-smi" class="section level4">
<h4>Verify NVIDIA SMI</h4>
<pre class="bash"><code>nvidia-smi</code></pre>
<pre><code>## Wed Oct 11 23:29:28 2017       
## +-----------------------------------------------------------------------------+
## | NVIDIA-SMI 384.81                 Driver Version: 384.81                    |
## |-------------------------------+----------------------+----------------------+
## | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
## | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
## |===============================+======================+======================|
## |   0  GeForce GTX 106...  Off  | 00000000:01:00.0  On |                  N/A |
## | 24%   31C    P8     7W / 120W |    779MiB /  6057MiB |      0%      Default |
## +-------------------------------+----------------------+----------------------+
##                                                                                
## +-----------------------------------------------------------------------------+
## | Processes:                                                       GPU Memory |
## |  GPU       PID   Type   Process name                             Usage      |
## |=============================================================================|
## |    0      2445      G   /usr/lib/xorg/Xorg                           476MiB |
## |    0      2966      G   compiz                                       298MiB |
## |    0      3406      G   /usr/lib/firefox/firefox                       1MiB |
## +-----------------------------------------------------------------------------+</code></pre>
</div>
<div id="compile-cuda-toolkit-sample-programs" class="section level4">
<h4>Compile CUDA Toolkit sample programs</h4>
<p>Go to the folder where the samples resides: <code>~/NVIDIA_CUDA-9.0_Samples</code>.</p>
<pre class="bash"><code>make</code></pre>
<p>Run <code>deviceQuery</code></p>
<p>If the CUDA software is installed and configured correctly, the output for deviceQuery should look similar to the output below.</p>
<pre class="bash"><code>~/NVIDIA_CUDA-9.0_Samples/bin/x86_64/linux/release/./deviceQuery</code></pre>
<pre><code>## /home/samuel/NVIDIA_CUDA-9.0_Samples/bin/x86_64/linux/release/./deviceQuery Starting...
## 
##  CUDA Device Query (Runtime API) version (CUDART static linking)
## 
## Detected 1 CUDA Capable device(s)
## 
## Device 0: &quot;GeForce GTX 1060 6GB&quot;
##   CUDA Driver Version / Runtime Version          9.0 / 9.0
##   CUDA Capability Major/Minor version number:    6.1
##   Total amount of global memory:                 6057 MBytes (6351224832 bytes)
##   (10) Multiprocessors, (128) CUDA Cores/MP:     1280 CUDA Cores
##   GPU Max Clock rate:                            1709 MHz (1.71 GHz)
##   Memory Clock rate:                             4004 Mhz
##   Memory Bus Width:                              192-bit
##   L2 Cache Size:                                 1572864 bytes
##   Maximum Texture Dimension Size (x,y,z)         1D=(131072), 2D=(131072, 65536), 3D=(16384, 16384, 16384)
##   Maximum Layered 1D Texture Size, (num) layers  1D=(32768), 2048 layers
##   Maximum Layered 2D Texture Size, (num) layers  2D=(32768, 32768), 2048 layers
##   Total amount of constant memory:               65536 bytes
##   Total amount of shared memory per block:       49152 bytes
##   Total number of registers available per block: 65536
##   Warp size:                                     32
##   Maximum number of threads per multiprocessor:  2048
##   Maximum number of threads per block:           1024
##   Max dimension size of a thread block (x,y,z): (1024, 1024, 64)
##   Max dimension size of a grid size    (x,y,z): (2147483647, 65535, 65535)
##   Maximum memory pitch:                          2147483647 bytes
##   Texture alignment:                             512 bytes
##   Concurrent copy and kernel execution:          Yes with 2 copy engine(s)
##   Run time limit on kernels:                     Yes
##   Integrated GPU sharing Host Memory:            No
##   Support host page-locked memory mapping:       Yes
##   Alignment requirement for Surfaces:            Yes
##   Device has ECC support:                        Disabled
##   Device supports Unified Addressing (UVA):      Yes
##   Supports Cooperative Kernel Launch:            Yes
##   Supports MultiDevice Co-op Kernel Launch:      Yes
##   Device PCI Domain ID / Bus ID / location ID:   0 / 1 / 0
##   Compute Mode:
##      &lt; Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) &gt;
## 
## deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 9.0, CUDA Runtime Version = 9.0, NumDevs = 1
## Result = PASS</code></pre>
<p>The important outcomes are that a device was found (<code>Detected 1 CUDA Capable device(s)</code>), that the device matches the one on your system (<code>Device 0: &quot;GeForce GTX 1060 6GB&quot;</code>), and that the test passed (<code>Result = PASS</code>).</p>
<p>Run <code>bandwidthTest</code></p>
<p>Running the bandwidthTest program ensures that the system and the CUDA-capable device are able to communicate correctly.</p>
<pre class="bash"><code>~/NVIDIA_CUDA-9.0_Samples/bin/x86_64/linux/release/./bandwidthTest</code></pre>
<pre><code>## [CUDA Bandwidth Test] - Starting...
## Running on...
## 
##  Device 0: GeForce GTX 1060 6GB
##  Quick Mode
## 
##  Host to Device Bandwidth, 1 Device(s)
##  PINNED Memory Transfers
##    Transfer Size (Bytes) Bandwidth(MB/s)
##    33554432          12531.0
## 
##  Device to Host Bandwidth, 1 Device(s)
##  PINNED Memory Transfers
##    Transfer Size (Bytes) Bandwidth(MB/s)
##    33554432          13170.8
## 
##  Device to Device Bandwidth, 1 Device(s)
##  PINNED Memory Transfers
##    Transfer Size (Bytes) Bandwidth(MB/s)
##    33554432          144665.2
## 
## Result = PASS
## 
## NOTE: The CUDA Samples are not meant for performance measurements. Results may vary when GPU Boost is enabled.</code></pre>
<p>The important point is that you obtain measurements, and that the second-to-last line (<code>Result = PASS</code>) confirms that all necessary tests passed.</p>
<p>DONE!</p>
<p>Enjoy! 😄</p>
</div>
</div>
</div>
