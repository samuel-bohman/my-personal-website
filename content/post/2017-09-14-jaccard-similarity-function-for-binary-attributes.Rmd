---
title: Jaccard index function for binary attributes
author: Samuel Bohman
date: '2017-09-14'
tags:
  - r
  - jaccard-index
slug: jaccard-index-function-for-binary-attributes
output:
  blogdown::html_page
summary: "Function for calculating the Jaccard index and Jaccard distance for binary attributes."
---

Function for calculating the Jaccard index (similarity) and the complementary Jaccard distance for binary attributes. The function takes two arguments: `x` a dataframe or matrix object, and `m` the `MARGIN` argument used in the `apply` function. If your data is in long format similar to `df1` set `m = 1` to apply `sum` over the rows. If your data is in wide format similar to  `df2` set `m = 2` to apply `sum` over the columns. 

```{r}
jaccard <- function(x, m) {
  if (m == 1 | m == 2) {
    M_00 <- apply(x, m, sum) == 0
    M_11 <- apply(x, m, sum) == 2
    if (m == 1) {
      x <- x[!M_00, ]
      j_index <- sum(M_11) / nrow(x)
    } else {
      x <- x[, !M_00]
      j_index <- sum(M_11) / length(x)
    }
    j_dist <- 1 - j_index
    return(c(j_index = j_index, j_dist = j_dist))
  } else break
}
```

## Examples

Data in long format: 

```{r}
df1 <- data.frame(
  IDS = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 0), 
  CESD = c(1, 1, 1, 0, 1, 1, 0, 0, 0, 0))
head(df1)
```

```{r}
jaccard(df1, 1)
```

Data in wide format: 

```{r}
df2 <- data.frame(Q1 = c(1L, 0L), Q2 = c(0L, 1L), Q3 = c(0L, 1L), Q4 = c(1L, 0L), Q5 = c(1L, 1L))
df2
```

```{r}
jaccard(df2, 2)
```

Logical vectors work too: 

```{r}
df3 <- data.frame(A = c(TRUE, TRUE, TRUE), B = c(TRUE, TRUE, FALSE))
df3
```

```{r}
jaccard(df3, 1)
```

Enjoy! `r emo::ji("smile")`
